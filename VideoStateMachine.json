{
  "Comment": "The typical video workflow",
  "StartAt": "prepareData",
  "States": {
    "prepareData": {
      "Type": "Task",
      "Resource":  "${prepareDataArn}",
      "Next": "Check"
    },
    "Check": {
      "Type": "Choice",
      "Choices":[
          {
             "Variable":"$.continue",
             "BooleanEquals": false,
             "Next":"iteratorMaster"
          }
       ],
       "Default":"CreateResume"
    },
    "iteratorMaster": {
      "Type": "Task",
      "Resource": "${frameGroupingArn}",
      "Next": "Iterate"
    },
    "Iterate": {
      "Type": "Map",
      "InputPath": "$.detail",
      "ItemsPath": "$.items",
      "Iterator": {
        "StartAt": "Recognize",
        "States": {
          "Recognize": {
            "Type": "Task",
            "Resource": "${recognizerArn}",
            "End": true
          }
        }
      },
      "ResultPath": "$.detail.items",
      "Next":"notifyProgression"
    },
    "notifyProgression": {
      "Type": "Task",
      "Resource":  "${prepareDataArn}",
      "Next": "Check"
    },
    "CreateResume": {
      "Type": "Task",
      "Resource":  "${makeResumeArn}",
      "Next": "prioritize"
    },
    "prioritize": {
      "Type": "Task",
      "Resource":  "${prioritizeArn}",
      "Next": "makeFinal"
    },
    "makeFinal": {
      "Type": "Task",
      "Resource":  "${makeFinalArn}",
      "End": true
    }
  }
}